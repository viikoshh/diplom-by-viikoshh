{% extends 'base.html' %}

{% block title %} Оформить заказ {% endblock %}

{% block link %}
<link rel="stylesheet" href="{{ url_for('static', filename='style_cart.css') }}">
<script src="https://code.jquery.com/jquery-2.2.4.js" charset="utf-8"></script>

{% endblock %}

{% block main %}
<main>

      <!-- Title -->
      <div class="title">
        Shopping Bag
      </div>
    <form method="post">
    <div class="shopping-cart">
      {% for el in order %}
      <div class="item" style="height: 180px">
        <div class="buttons" style="height: 200px;width:100px; margin-top: 40px">
          <div>
              <span class="delete-btn"></span>
              <span class="like-btn"></span>
          </div>

        </div>

        <div class="image" style="width: 300px; height: 200px; margin-top: auto">
          <img src="{{ el[0][2] }}" width="280" height="140" alt="" />
        </div>

        <div style="margin-top:auto; margin-bottom: auto">
            <div class="description" style="width: 300px; font-size: 16px">
                <p>{{ el[0][1] }}</p>
            </div>
        </div>


        <div style="margin-top:auto; margin-bottom: auto">
        <div class="quantity">
          <button class="plus-btn" type="submit" name="button">
            <img src="static/cart/plus.svg" alt="" />
          </button>
          <input type="text" name="count" value="{{ el[1] }}">
          <button class="minus-btn" type="submit" name="button">
            <img src="static/cart/minus.svg" alt="" />
          </button>
        </div>
        </div>

        <div style="margin: auto">
            <p style="margin-top: 25px;margin-bottom: 0px; font-size: 12px">{{ el[0][3] }} р/шт</p>
            <p style="font-size: 18px; font-weight: bold; margin-top: 0px">{{ el[2] }} р </p>
        </div>

      </div>
      {% endfor %}

      <div style="margin: auto;width: 30%">
            <br><br><br>
           <button  type="submit" style="margin: auto;">обновить</button>

      </div>

      <!-- Product #2
      <div class="item">
        <div class="buttons">
          <span class="delete-btn"></span>
          <span class="like-btn"></span>
        </div>

        <div class="image">
          <img src="static/cart/item-2.png" alt=""/>
        </div>

        <div class="description">
          <span>Maison Margiela</span>
          <span>Future Sneakers</span>
          <span>White</span>
        </div>

        <div class="quantity">
          <button class="plus-btn" type="button" name="button">
            <img src="plus.svg" alt="" />
          </button>
          <input type="text" name="name" value="1">
          <button class="minus-btn" type="button" name="button">
            <img src="minus.svg" alt="" />
          </button>
        </div>

        <div class="total-price">$870</div>
      </div>-->

      <!-- Product #3
      <div class="item">
        <div class="buttons">
          <span class="delete-btn"></span>
          <span class="like-btn"></span>
        </div>

        <div class="image">
          <img src="item-3.png" alt="" />
        </div>

        <div class="description">
          <span>Our Legacy</span>
          <span>Brushed Scarf</span>
          <span>Brown</span>
        </div>

        <div class="quantity">
          <button class="plus-btn" type="button" name="button">
            <img src="plus.svg" alt="" />
          </button>
          <input type="text" name="name" value="1">
          <button class="minus-btn" type="button" name="button">
            <img src="minus.svg" alt="" />
          </button>
        </div>

        <div class="total-price">$349</div>
      </div>-->
    </div>


    <script type="text/javascript">
      $('.minus-btn').on('click', function(e) {
    		e.preventDefault();
    		var $this = $(this);
    		var $input = $this.closest('div').find('input');
    		var value = parseInt($input.val());

    		if (value > 1) {
    			value = value - 1;
    		} else {
    			value = 0;
    		}


        $input.val(value);

    	});

    	$('.plus-btn').on('click', function(e) {
    		e.preventDefault();
    		var $this = $(this);
    		var $input = $this.closest('div').find('input');
    		var value = parseInt($input.val());

    		if (value < 100) {
      		value = value + 1;
    		} else {
    			value =100;
    		}

    		$input.val(value);
    	});

      $('.like-btn').on('click', function() {
        $(this).toggleClass('is-active');
      });
    </script>


    </form>
</main>

{% endblock %}